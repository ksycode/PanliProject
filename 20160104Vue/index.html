<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Vue.js练习</title>
  <script src="./build/js/vue.js"></script>
</head>

<body>
  <div id="example">
    {{ message | json }}
    <br/>
    <input v-model="message">
    <div id="item-{{message}}"> 我的ID属性是动态的:itme-{{message}}</div>
    <br/>
    <button type="button" v-on:click="reverseMessage" name="button">点我提交</button>
    <br/> a={{ a }}, b={{ b }}
    <br/>
    <button type="button" v-on:click="isshow" name="button">{{btn1}}</button>
    <template v-if="a">
      <h1>Title</h1>
      <p>Paragraph 1</p>
      <p>Paragraph 2</p>
    </template>
    <template v-else>
      <h1>Title1</h1>
      <p>Paragraph 11</p>
      <p>Paragraph 21</p>
    </template>
    <input v-model="parentMsg">
    <br/>
    <my-component v-bind:Msg="parentMsg |reverse"></my-component>

    <br/>
    <template id="child-template">
      <input v-model="msg">
      <button v-on:click="notify">Dispatch Event</button>
    </template>

    <!-- 父组件模板 -->
    <div id="events-example">
      <p>Messages: {{ messages | json }}</p>
      <child></child>
    </div>


    
  </div>



</body>
<script type="text/javascript">
  window.onload = function() {

      var foo = new Vue({
        el: '#example',
        data: {
          message: 'hello',
          a: 1,
          parentMsg: '你好',
          btn1: '点我消失'
        },
        computed: {
          b: function() {
            return this.a + 1
          }
        },
        methods: {
          reverseMessage: function() {
            alert(this.message)
          },
          isshow: function() {

            if (this.a == 1) {
              this.a = 0
              this.btn1 = '点我显示'
            } else {
              this.a = 1
              this.btn1 = '点我消失'
            }
          }
        }
      })

    }
    //定义一个
  Vue.component('my-component', {
    // 声明 props
    props: ['Msg'],
    // prop 可以用在模板内
    // 可以用 `this.msg` 设置
    template: '<span>{{ Msg }}</span>'
  })



  //自定义过滤器
  Vue.filter('reverse', function(value) {
    return value.replace(/艹/g, '**')
  })


  // 注册子组件
  // 将当前消息派发出去
  Vue.component('child', {
    template: '#child-template',
    data: function() {
      return {
        msg: 'hello'
      }
    },
    methods: {
      notify: function() {
        if (this.msg.trim()) {
          this.$dispatch('child-msg', this.msg)
          this.msg = ''
        }
      }
    }
  })

  // 启动父组件
  // 将收到消息时将事件推入一个数组
  var parent = new Vue({
    el: '#events-example',
    data: {
      messages: []
    },
    // 在创建实例时 `events` 选项简单地调用 `$on`
    events: {
      'child-msg': function(msg) {
        // 事件回调内的 `this` 自动绑定到注册它的实例上
        this.messages.push(msg)
      }
    }
  })
</script>

</html>
